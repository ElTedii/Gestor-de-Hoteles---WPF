<UserControl x:Class="Gestión_Hotelera.View.ReportesView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">

    <Grid Background="{StaticResource panelColor}" Margin="10">

        <TabControl Background="Transparent"
                    BorderThickness="0"
                    Padding="10"
                    FontFamily="Verdana"
                    Style="{StaticResource KumaTabControl}">

            <!-- ===================== OCUPACIÓN ===================== -->
            <TabItem Header="Ocupación por Hotel"
                     Style="{StaticResource KumaTabItem}">
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Filtros -->
                    <StackPanel Orientation="Horizontal"
                                Margin="0 0 0 15"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top">

                        <!-- Hotel -->
                        <StackPanel>
                            <TextBlock Text="Hotel"
                                       Foreground="{StaticResource plainTextColor2}"/>
                            <ComboBox ItemsSource="{Binding Hoteles}"
                                      SelectedItem="{Binding HotelSeleccionado}"
                                      DisplayMemberPath="Nombre"
                                      Width="220"
                                      Style="{StaticResource DarkComboBoxStyle}"/>
                        </StackPanel>

                        <!-- Año -->
                        <StackPanel>
                            <TextBlock Text="Año"
                                       Foreground="{StaticResource plainTextColor2}"/>
                            <TextBox Text="{Binding AñoOcupacion}"
                                     Width="80"
                                     Style="{StaticResource DarkInputStyle}"/>
                        </StackPanel>

                        <!-- Mes -->
                        <StackPanel>
                            <TextBlock Text="Mes (1-12)"
                                       Foreground="{StaticResource plainTextColor2}"/>
                            <TextBox Text="{Binding MesOcupacion}"
                                     Width="80"
                                     Style="{StaticResource DarkInputStyle}"/>
                        </StackPanel>

                        <Button Content="Buscar"
                                Margin="20 18 0 0"
                                Width="120"
                                Command="{Binding BuscarOcupacionCommand}"
                                Style="{StaticResource KumaButton}"/>
                    </StackPanel>

                    <!-- Resultados -->
                    <DataGrid Grid.Row="1"
                              ItemsSource="{Binding OcupacionItems}"
                              AutoGenerateColumns="False"
                              Style="{StaticResource KumaDataGrid}"
                              CanUserAddRows="False"
                              IsReadOnly="True">

                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Hotel"
                                                Binding="{Binding HotelNombre}"/>
                            <DataGridTextColumn Header="Año"
                                                Binding="{Binding Año}"/>
                            <DataGridTextColumn Header="Mes"
                                                Binding="{Binding MesNombre}"/>
                            <DataGridTextColumn Header="Cliente"
                                                Binding="{Binding ClienteNombre}"/>
                            <DataGridTextColumn Header="Tipo hab."
                                                Binding="{Binding TipoHabitacion}"/>
                            <DataGridTextColumn Header="# Hab."
                                                Binding="{Binding NumeroHabitacion}"/>
                            <DataGridTextColumn Header="Check-In"
                                                Binding="{Binding FechaEntrada, StringFormat=dd/MM/yyyy}"/>
                            <DataGridTextColumn Header="Check-Out"
                                                Binding="{Binding FechaSalida, StringFormat=dd/MM/yyyy}"/>
                            <DataGridTextColumn Header="Estado"
                                                Binding="{Binding Estado}"/>
                            <DataGridTextColumn Header="Hospedaje"
                                                Binding="{Binding PagoHospedaje, StringFormat=C}"/>
                            <DataGridTextColumn Header="Servicios"
                                                Binding="{Binding PagoServicios, StringFormat=C}"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- ===================== VENTAS ===================== -->
            <TabItem Header="Ventas por Hotel"
                     Style="{StaticResource KumaTabItem}">
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Filtros -->
                    <StackPanel Orientation="Horizontal"
                                Margin="0 0 0 15">

                        <StackPanel>
                            <TextBlock Text="País"
                                       Foreground="{StaticResource plainTextColor2}"/>
                            <ComboBox ItemsSource="{Binding Paises}"
                                      SelectedItem="{Binding PaisSeleccionado}"
                                      Width="140"
                                      Style="{StaticResource DarkComboBoxStyle}"/>
                        </StackPanel>

                        <StackPanel>
                            <TextBlock Text="Ciudad"
                                       Foreground="{StaticResource plainTextColor2}"/>
                            <ComboBox ItemsSource="{Binding Ciudades}"
                                      SelectedItem="{Binding CiudadSeleccionada}"
                                      Width="160"
                                      Style="{StaticResource DarkComboBoxStyle}"/>
                        </StackPanel>

                        <StackPanel>
                            <TextBlock Text="Hotel"
                                       Foreground="{StaticResource plainTextColor2}"/>
                            <ComboBox ItemsSource="{Binding HotelesVentas}"
                                      SelectedItem="{Binding HotelVentasSeleccionado}"
                                      DisplayMemberPath="Nombre"
                                      Width="220"
                                      Style="{StaticResource DarkComboBoxStyle}"/>
                        </StackPanel>

                        <StackPanel>
                            <TextBlock Text="Año"
                                       Foreground="{StaticResource plainTextColor2}"/>
                            <TextBox Text="{Binding AñoVentas}"
                                     Width="80"
                                     Style="{StaticResource DarkInputStyle}"/>
                        </StackPanel>

                        <Button Content="Buscar"
                                Margin="20 18 0 0"
                                Width="120"
                                Command="{Binding BuscarVentasCommand}"
                                Style="{StaticResource KumaButton}"/>
                    </StackPanel>

                    <!-- Resultados -->
                    <DataGrid Grid.Row="1"
                              ItemsSource="{Binding VentasItems}"
                              AutoGenerateColumns="False"
                              Style="{StaticResource KumaDataGrid}"
                              CanUserAddRows="False"
                              IsReadOnly="True">

                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Ciudad"
                                                Binding="{Binding Ciudad}"/>
                            <DataGridTextColumn Header="Hotel"
                                                Binding="{Binding NombreHotel}"/>
                            <DataGridTextColumn Header="Año"
                                                Binding="{Binding Año}"/>
                            <DataGridTextColumn Header="Mes"
                                                Binding="{Binding MesNombre}"/>
                            <DataGridTextColumn Header="Hospedaje"
                                                Binding="{Binding IngresosHospedaje, StringFormat=C}"/>
                            <DataGridTextColumn Header="Servicios"
                                                Binding="{Binding IngresosServicios, StringFormat=C}"/>
                            <DataGridTextColumn Header="Total"
                                                Binding="{Binding Total, StringFormat=C}"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- ===================== HISTORIAL CLIENTE ===================== -->
            <TabItem Header="Historial por Cliente"
                     Style="{StaticResource KumaTabItem}">
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Filtros -->
                    <StackPanel Orientation="Horizontal"
                                Margin="0 0 0 15">

                        <StackPanel>
                            <TextBlock Text="Correo / RFC"
                                       Foreground="{StaticResource plainTextColor2}"/>
                            <TextBox Text="{Binding FiltroCliente}"
                                     Width="220"
                                     Style="{StaticResource DarkInputStyle}"/>
                        </StackPanel>

                        <StackPanel>
                            <TextBlock Text="Año"
                                       Foreground="{StaticResource plainTextColor2}"/>
                            <TextBox Text="{Binding AñoHistorial}"
                                     Width="80"
                                     Style="{StaticResource DarkInputStyle}"/>
                        </StackPanel>

                        <Button Content="Buscar"
                                Margin="20 18 0 0"
                                Width="120"
                                Command="{Binding BuscarHistorialCommand}"
                                Style="{StaticResource KumaButton}"/>
                    </StackPanel>

                    <DataGrid Grid.Row="1"
                              ItemsSource="{Binding HistorialItems}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              IsReadOnly="True"
                              RowHeight="32"
                              HeadersVisibility="Column"
                              GridLinesVisibility="None"
                              Background="{StaticResource panelOverColor}"
                              Foreground="White"
                              BorderThickness="0">

                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Cliente"
                                                Binding="{Binding ClienteNombre}"/>
                            <DataGridTextColumn Header="Ciudad"
                                                Binding="{Binding Ciudad}"/>
                            <DataGridTextColumn Header="Hotel"
                                                Binding="{Binding HotelNombre}"/>
                            <DataGridTextColumn Header="Tipo hab."
                                                Binding="{Binding TipoHabitacion}"/>
                            <DataGridTextColumn Header="# Hab."
                                                Binding="{Binding NumeroHabitacion}"/>
                            <DataGridTextColumn Header="Personas"
                                                Binding="{Binding Personas}"/>
                            <DataGridTextColumn Header="Fecha reserva"
                                                Binding="{Binding FechaReserva, StringFormat=dd/MM/yyyy}"/>
                            <DataGridTextColumn Header="Check In"
                                                Binding="{Binding FechaCheckIn, StringFormat=dd/MM/yyyy}"/>
                            <DataGridTextColumn Header="Check Out"
                                                Binding="{Binding FechaCheckOut, StringFormat=dd/MM/yyyy}"/>
                            <DataGridTextColumn Header="Estado"
                                                Binding="{Binding Estado}"/>
                            <DataGridTextColumn Header="Anticipo"
                                                Binding="{Binding Anticipo, StringFormat=C}"/>
                            <DataGridTextColumn Header="Hospedaje"
                                                Binding="{Binding Hospedaje, StringFormat=C}"/>
                            <DataGridTextColumn Header="Servicios"
                                                Binding="{Binding Servicios, StringFormat=C}"/>
                            <DataGridTextColumn Header="Total"
                                                Binding="{Binding Total, StringFormat=C}"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

        </TabControl>
    </Grid>
</UserControl>