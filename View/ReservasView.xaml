<UserControl x:Class="Gestión_Hotelera.View.ReservasView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">

    <Border Background="{StaticResource panelColor}"
            Padding="20"
            CornerRadius="12">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <!-- TÍTULO -->
            <TextBlock Text="Reservaciones"
                       FontSize="26"
                       FontWeight="Bold"
                       Foreground="{StaticResource titleColor2}"
                       Grid.Row="0"/>

            <!-- FILTROS -->
            <StackPanel Grid.Row="1"
                        Orientation="Horizontal"
                        Margin="0,15,0,15"
                        HorizontalAlignment="Left">

                <!-- HOTEL -->
                <StackPanel>
                    <TextBlock Text="Hotel"
                               Foreground="{StaticResource plainTextColor2}"
                               Margin="0,0,0,3"/>

                    <ComboBox ItemsSource="{Binding Hoteles}"
                              DisplayMemberPath="Nombre"
                              SelectedItem="{Binding HotelSeleccionado}"
                              Width="220"
                              Height="32"
                              Foreground="White"
                              Style="{StaticResource DarkComboBoxStyle}"/>
                </StackPanel>

                <!-- ESTADO -->
                <StackPanel>
                    <TextBlock Text="Estado"
                               Foreground="{StaticResource plainTextColor2}"
                               Margin="0,0,0,3"/>

                    <ComboBox ItemsSource="{Binding Estados}"
                              SelectedItem="{Binding EstadoSeleccionado}"
                              Width="160"
                              Height="32"
                              Foreground="White"
                              Style="{StaticResource DarkComboBoxStyle}"/>
                </StackPanel>

                <!-- BOTÓN NUEVA RESERVACIÓN -->
                <Button Content="Nueva Reservación"
                        Command="{Binding NuevaCommand}"
                        Style="{StaticResource KumaButton}"
                        Width="200"
                        Height="36"
                        VerticalAlignment="Bottom"
                        Margin="10,0,0,0"/>
            </StackPanel>

            <!-- TABLA -->
            <DataGrid Grid.Row="2"
                      ItemsSource="{Binding Reservaciones}"
                      AutoGenerateColumns="False"
                      Style="{StaticResource KumaDataGrid}"
                      CanUserAddRows="False"
                      IsReadOnly="True">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Cliente"
                                        Binding="{Binding ClienteNombre}"
                                        Width="*"/>

                    <DataGridTextColumn Header="Habitación"
                                        Binding="{Binding NumeroHabitacion}"
                                        Width="90"/>

                    <DataGridTextColumn Header="Entrada"
                                        Binding="{Binding FechaEntrada, StringFormat=dd/MM/yyyy}"
                                        Width="120"/>

                    <DataGridTextColumn Header="Salida"
                                        Binding="{Binding FechaSalida, StringFormat=dd/MM/yyyy}"
                                        Width="120"/>

                    <DataGridTextColumn Header="Personas"
                                        Binding="{Binding NumPersonas}"
                                        Width="80"/>

                    <DataGridTextColumn Header="Estado"
                                        Binding="{Binding Estado}"
                                        Width="110"/>

                    <DataGridTextColumn Header="Anticipo"
                                        Binding="{Binding Anticipo, StringFormat=C}"
                                        Width="110"/>

                    <DataGridTextColumn Header="Total"
                                        Binding="{Binding PrecioTotal, StringFormat=C}"
                                        Width="110"/>

                    <!-- Por ahora el botón Editar solo está preparado,
                         podemos conectarlo después a ReservaDetalle -->
                    <DataGridTemplateColumn Header="Acciones" Width="120">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Editar"
                                        Command="{Binding DataContext.EditarCommand,
                                                  RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        CommandParameter="{Binding}"
                                        Style="{StaticResource KumaButton}"
                                        Width="80"
                                        Height="26"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                </DataGrid.Columns>

            </DataGrid>

        </Grid>

    </Border>
</UserControl>